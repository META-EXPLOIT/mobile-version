package br.com.metaexploit.diversight

import android.os.Bundle
import android.view.View
import androidx.core.content.res.ResourcesCompat
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.RecyclerView
import java.util.*


class MainFragment : Fragment(R.layout.fragment_main) {

    private lateinit var menuRecyclerView: RecyclerView
    private val menuAdapter by lazy {
        MainMenuAdapter {
            filter(it)
        }
    }
    private lateinit var surveyItemRecyclerView: RecyclerView
    private val surveyAdapter by lazy {
        MainSurveyAdapter()
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        activity?.window?.statusBarColor =
            ResourcesCompat.getColor(resources, R.color.blue_navBar_main, null)

        menuRecyclerView = view.findViewById(R.id.fg_main_recyclerview_menu)
        menuRecyclerView.adapter = menuAdapter

        menuAdapter.getMenuList(
            listOf(
                ItemMainMenu(
                    title = "Di치ria",
                    type = 0,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "Semanais",
                    type = 1,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "NPS",
                    type = 2,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "Admissional",
                    type = 3,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "Demissional",
                    type = 4,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
            )
        )

        surveyItemRecyclerView = view.findViewById(R.id.fg_main_recyclerview_surveys)
        surveyItemRecyclerView.adapter = surveyAdapter

        surveyAdapter.setListSurvey(
            listOf(
                ItemSurvey(
                    "Pesquisas di치rias",
                    "daily",
                    listOf(
                        ItemSurveyItem(0, 0, Date()),
                        ItemSurveyItem(1, 0, Date()),
                        ItemSurveyItem(2, 0, Date())
                    )
                ),
                ItemSurvey(
                    "Pesquisas semanais",
                    "weekly",
                    listOf(
                        ItemSurveyItem(2, 1, Date()),
                        ItemSurveyItem(1, 1, Date()),
                        ItemSurveyItem(1, 1, Date())
                    )
                ),
                ItemSurvey(
                    "NPS",
                    "nps",
                    listOf(
                        ItemSurveyItem(2, 2, Date()),
                        ItemSurveyItem(1, 2, Date()),
                        ItemSurveyItem(0, 2, Date())
                    )
                ),
                ItemSurvey(
                    "Pesquisas Demissional / Admissional",
                    "survey",
                    listOf(
                        ItemSurveyItem(4, 3, Date()),
                        ItemSurveyItem(4, 3, Date()),
                        ItemSurveyItem(4, 4, Date())
                    )
                )
            )
        )

    }

    private var aux: Int = 0

    private fun filter(type: Int) {
        if (aux == 0) {
            when (type) {
                0 -> {
                    surveyAdapter.setListSurvey(
                        listOf(
                            ItemSurvey(
                                "Pesquisas di치rias",
                                "daily",
                                listOf(
                                    ItemSurveyItem(0, 0, Date()),
                                    ItemSurveyItem(1, 0, Date()),
                                    ItemSurveyItem(2, 0, Date())
                                )
                            )
                        )
                    )
                }
                1 -> {
                    surveyAdapter.setListSurvey(
                        listOf(
                            ItemSurvey(
                                "Pesquisas semanais",
                                "weekly",
                                listOf(
                                    ItemSurveyItem(2, 1, Date()),
                                    ItemSurveyItem(1, 1, Date()),
                                    ItemSurveyItem(1, 1, Date())
                                )
                            )
                        )
                    )
                }
                2 -> {
                    surveyAdapter.setListSurvey(
                        listOf(
                            ItemSurvey(
                                "NPS",
                                "nps",
                                listOf(
                                    ItemSurveyItem(2, 2, Date()),
                                    ItemSurveyItem(1, 2, Date()),
                                    ItemSurveyItem(0, 2, Date())
                                )
                            )
                        )
                    )
                }
                3 -> {
                    surveyAdapter.setListSurvey(
                        listOf(
                            ItemSurvey(
                                "Pesquisas Demissional / Admissional",
                                "survey",
                                listOf(
                                    ItemSurveyItem(4, 3, Date()),
                                    ItemSurveyItem(4, 3, Date())
                                )
                            )
                        )
                    )
                }
                else -> {
                    surveyAdapter.setListSurvey(
                        listOf(
                            ItemSurvey(
                                "Pesquisas Demissional / Admissional",
                                "survey",
                                listOf(
                                    ItemSurveyItem(4, 4, Date())
                                )
                            )
                        )
                    )
                }
            }
            aux = 1
        }
        else {
            surveyAdapter.setListSurvey(
                listOf(
                    ItemSurvey(
                        "Pesquisas di치rias",
                        "daily",
                        listOf(
                            ItemSurveyItem(0, 0, Date()),
                            ItemSurveyItem(1, 0, Date()),
                            ItemSurveyItem(2, 0, Date())
                        )
                    ),
                    ItemSurvey(
                        "Pesquisas semanais",
                        "weekly",
                        listOf(
                            ItemSurveyItem(2, 1, Date()),
                            ItemSurveyItem(1, 1, Date()),
                            ItemSurveyItem(1, 1, Date())
                        )
                    ),
                    ItemSurvey(
                        "NPS",
                        "nps",
                        listOf(
                            ItemSurveyItem(2, 2, Date()),
                            ItemSurveyItem(1, 2, Date()),
                            ItemSurveyItem(0, 2, Date())
                        )
                    ),
                    ItemSurvey(
                        "Pesquisas Demissional / Admissional",
                        "survey",
                        listOf(
                            ItemSurveyItem(4, 3, Date()),
                            ItemSurveyItem(4, 3, Date()),
                            ItemSurveyItem(4, 4, Date())
                        )
                    )
                )
            )
            aux = 0
        }
    }
}
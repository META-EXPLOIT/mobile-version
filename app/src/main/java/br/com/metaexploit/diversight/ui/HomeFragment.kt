package br.com.metaexploit.diversight.ui

import android.os.Bundle
import android.util.Log
import android.view.View
import androidx.core.content.res.ResourcesCompat
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.RecyclerView
import br.com.metaexploit.diversight.R
import br.com.metaexploit.diversight.adapter.MainMenuAdapter
import br.com.metaexploit.diversight.adapter.MainSurveyAdapter
import br.com.metaexploit.diversight.data.ItemMainMenu
import br.com.metaexploit.diversight.data.QuestionSurvey
import br.com.metaexploit.diversight.data.Survey
import br.com.metaexploit.diversight.data.SurveyItem
import java.util.*

class HomeFragment : Fragment(R.layout.fragment_home) {

    private lateinit var menuRecyclerView: RecyclerView
    private val menuAdapter by lazy {
        MainMenuAdapter {
            filter(it)
        }
    }
    private lateinit var surveyItemRecyclerView: RecyclerView
    private val surveyAdapter by lazy {
        MainSurveyAdapter {
            setClick(it.enunciated, it.questionOptions)
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        activity?.window?.statusBarColor =
            ResourcesCompat.getColor(resources, R.color.blue_navBar_main, null)

        menuRecyclerView = view.findViewById(R.id.fg_home_recyclerview_menu)
        menuRecyclerView.adapter = menuAdapter

        menuAdapter.getMenuList(
            listOf(
                ItemMainMenu(
                    title = "Diária",
                    type = 0,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "Semanais",
                    type = 1,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "NPS",
                    type = 2,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                )
            )
        )

        surveyItemRecyclerView = view.findViewById(R.id.fg_home_recyclerview_surveys)
        surveyItemRecyclerView.adapter = surveyAdapter

        surveyAdapter.setListSurvey(
            listOf(
//                Survey(
//                    "Pesquisas diárias",
//                    listOf(
//                        SurveyItem(0, 0, Date()),
//                        SurveyItem(1, 0, Date()),
//                        SurveyItem(2, 0, Date())
//                    )
//                ),
//                Survey(
//                    "Pesquisas semanais",
//                    listOf(
//                        SurveyItem(2, 1, Date()),
//                        SurveyItem(1, 1, Date()),
//                        SurveyItem(1, 1, Date())
//                    )
//                ),
                Survey(
                    "NPS",
                    listOf(
                        SurveyItem(
                            2, 2, Date(), listOf(
                                QuestionSurvey(
                                    "Enunciado da pergunta 1",
                                    listOf(
                                        "Opção 1",
                                        "Opção 2",
                                        "Opção 3"
                                    )
                                )
                            )
                        ),
                        SurveyItem(
                            1, 2, Date(), listOf(
                                QuestionSurvey(
                                    "Enunciado da pergunta 2",
                                    listOf(
                                        "Opção 1",
                                        "Opção 2",
                                        "Opção 3"
                                    )
                                )
                            )
                        ),
                        SurveyItem(
                            0, 2, Date(), listOf(
                                QuestionSurvey(
                                    "Enunciado da pergunta 3",
                                    listOf(
                                        "Opção 1",
                                        "Opção 2",
                                        "Opção 3"
                                    )
                                )
                            )
                        )
                    )
                ),
//                Survey(
//                    "Pesquisas Demissional / Admissional",
//                    listOf(
//                        SurveyItem(4, 3, Date()),
//                        SurveyItem(4, 3, Date()),
//                        SurveyItem(4, 4, Date())
//                    )
//                )
            )
        )

    }

    private var aux: Int = 0

    private fun filter(type: Int) {
        if (aux == 0) {
            when (type) {
                0 -> {
//                    surveyAdapter.setListSurvey(
//                        listOf(
//                            Survey(
//                                "Pesquisas diárias",
//                                listOf(
//                                    SurveyItem(0, 0, Date()),
//                                    SurveyItem(1, 0, Date()),
//                                    SurveyItem(2, 0, Date())
//                                )
//                            )
//                        )
//                    )
                }
                1 -> {
//                    surveyAdapter.setListSurvey(
//                        listOf(
//                            Survey(
//                                "Pesquisas semanais",
//                                listOf(
//                                    SurveyItem(2, 1, Date()),
//                                    SurveyItem(1, 1, Date()),
//                                    SurveyItem(1, 1, Date())
//                                )
//                            )
//                        )
//                    )
                }
                2 -> {
                    surveyAdapter.setListSurvey(
                        listOf(
                            Survey(
                                "NPS",
                                listOf(
                                    SurveyItem(
                                        2,
                                        2,
                                        Date(),
                                        listOf(
                                            QuestionSurvey(
                                                "Enunciado da pergunta 1",
                                                listOf(
                                                    "Opção 1",
                                                    "Opção 2",
                                                    "Opção 3"
                                                )
                                            )
                                        )
                                    ),
                                    SurveyItem(
                                        1,
                                        2,
                                        Date(),
                                        listOf(
                                            QuestionSurvey(
                                                "Enunciado da pergunta 2",
                                                listOf(
                                                    "Opção 1",
                                                    "Opção 2",
                                                    "Opção 3"
                                                )
                                            )
                                        )
                                    ),
                                    SurveyItem(
                                        0,
                                        2,
                                        Date(),
                                        listOf(
                                            QuestionSurvey(
                                                "Enunciado da pergunta 2",
                                                listOf(
                                                    "Opção 1",
                                                    "Opção 2",
                                                    "Opção 3"
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                }
                3 -> {
//                    surveyAdapter.setListSurvey(
//                        listOf(
//                            Survey(
//                                "Pesquisas Demissional / Admissional",
//                                listOf(
//                                    SurveyItem(4, 3, Date()),
//                                    SurveyItem(4, 3, Date())
//                                )
//                            )
//                        )
//                    )
                }
                else -> {
//                    surveyAdapter.setListSurvey(
//                        listOf(
//                            Survey(
//                                "Pesquisas Demissional / Admissional",
//                                listOf(
//                                    SurveyItem(4, 4, Date())
//                                )
//                            )
//                        )
//                    )
                }
            }
            aux = 1
        } else {
//            surveyAdapter.setListSurvey(
//                listOf(
//                    Survey(
//                        "Pesquisas diárias",
//                        listOf(
//                            SurveyItem(0, 0, Date()),
//                            SurveyItem(1, 0, Date()),
//                            SurveyItem(2, 0, Date())
//                        )
//                    ),
//                    Survey(
//                        "Pesquisas semanais",
//                        listOf(
//                            SurveyItem(2, 1, Date()),
//                            SurveyItem(1, 1, Date()),
//                            SurveyItem(1, 1, Date())
//                        )
//                    ),
//                    Survey(
//                        "NPS",
//                        listOf(
//                            SurveyItem(2, 2, Date()),
//                            SurveyItem(1, 2, Date()),
//                            SurveyItem(0, 2, Date())
//                        )
//                    ),
//                    Survey(
//                        "Pesquisas Demissional / Admissional",
//                        listOf(
//                            SurveyItem(4, 3, Date()),
//                            SurveyItem(4, 3, Date()),
//                            SurveyItem(4, 4, Date())
//                        )
//                    )
//                )
//            )
            aux = 0
        }
    }

    private fun setClick(enunciated: String, questionOptions: Array<String>) {
        Log.i("TESTE", "toquei")
//        findNavController().navigate(
//            HomeFragmentDirections.actionHomeFragmentToSurveyFragment(
//                enunciated = enunciated,
//                questionOptions = questionOptions
//            )
//        )
    }
}
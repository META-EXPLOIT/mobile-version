package br.com.metaexploit.diversight.ui

import android.os.Bundle
import android.util.Log
import android.view.View
import androidx.core.content.res.ResourcesCompat
import androidx.fragment.app.Fragment
import androidx.navigation.fragment.findNavController
import androidx.recyclerview.widget.RecyclerView
import br.com.metaexploit.diversight.R
import br.com.metaexploit.diversight.ui.adapter.MainMenuAdapter
import br.com.metaexploit.diversight.ui.adapter.MainSurveyAdapter
import br.com.metaexploit.diversight.data.*
import java.util.*

class HomeFragment : Fragment(R.layout.fragment_home) {

    private lateinit var menuRecyclerView: RecyclerView
    private val menuAdapter by lazy {
        MainMenuAdapter {
            filter(it)
        }
    }
    private lateinit var surveyItemRecyclerView: RecyclerView
    private val surveyAdapter by lazy {
        MainSurveyAdapter {
            setClick()
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        activity?.window?.statusBarColor =
            ResourcesCompat.getColor(resources, R.color.blue_navBar_main, null)

        menuRecyclerView = view.findViewById(R.id.fg_home_recyclerview_menu)
        menuRecyclerView.adapter = menuAdapter

        menuAdapter.getMenuList(
            listOf(
                ItemMainMenu(
                    title = "Diária",
                    type = 0,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "Semanais",
                    type = 1,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                ),
                ItemMainMenu(
                    title = "NPS",
                    type = 2,
                    icon = ResourcesCompat.getDrawable(resources, R.drawable.ic_calendar, null)
                )
            )
        )

        surveyItemRecyclerView = view.findViewById(R.id.fg_home_recyclerview_surveys)
        surveyItemRecyclerView.adapter = surveyAdapter

        surveyAdapter.setListSurvey(
            // Lista de itens de pesquisa
            list = listOf(

                // DIÁRIO
                ListItem(
                    // Type 0 - Humor Diário
                    // Type 1 - Humor Semanal
                    // Type 2 - NPS
                    // Type 3 - Admissional
                    // Type 4 - Demissional
                    type = 0,

                    // Itens de pequisa
                    list = listOf(
                        ItemPesquisa(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 0,

                            // Lista de perguntas
                            content = null,

                            // Data
                            date = Date()
                        )
                    )
                ),

                // SEMANAL
                ListItem(
                    // Type 0 - Humor Diário
                    // Type 1 - Humor Semanal
                    // Type 2 - NPS
                    // Type 3 - Admissional
                    // Type 4 - Demissional
                    type = 1,

                    // Itens de pequisa
                    list = listOf(
                        ItemPesquisa(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 1,

                            // Lista de perguntas
                            content = null,

                            // Data
                            date = Date()
                        )
                    )
                ),

                // NPS
                ListItem(
                    // Type 0 - Humor Diário
                    // Type 1 - Humor Semanal
                    // Type 2 - NPS
                    // Type 3 - Admissional
                    // Type 4 - Demissional
                    type = 2,

                    // Itens de pequisa
                    list = listOf(
                        ItemPesquisa(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 2,

                            // Lista de perguntas
                            content = listOf(
                                Pergunta(
                                    // Type 0 - Múltipla escolha
                                    // Type 1 - Escala
                                    // Type 2 - Checklist
                                    type = 0,
                                    enunciated = "Enunciado 1 da pesquisa de NPS.",
                                    questionOptions = listOf(
                                        "Opção 1",
                                        "Opção 2",
                                        "Opção 3"
                                    )
                                )
                            ),

                            // Data
                            date = Date()
                        )
                    )
                ),

                // Admissional
                ListItem(
                    // Type 0 - Humor Diário
                    // Type 1 - Humor Semanal
                    // Type 2 - NPS
                    // Type 3 - Admissional
                    // Type 4 - Demissional
                    type = 3,

                    // Itens de pequisa
                    list = listOf(
                        ItemPesquisa(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 3,

                            // Lista de perguntas
                            content = listOf(
                                Pergunta(
                                    // Type 0 - Múltipla escolha
                                    // Type 1 - Escala
                                    // Type 2 - Checklist
                                    type = 0,
                                    enunciated = "Enunciado 1 da pesquisa de NPS.",
                                    questionOptions = listOf(
                                        "Opção 1",
                                        "Opção 2",
                                        "Opção 3"
                                    )
                                )
                            ),

                            // Data
                            date = Date()
                        )
                    ),
                ),

                // DEMISSIONAL
                ListItem(
                    // Type 0 - Humor Diário
                    // Type 1 - Humor Semanal
                    // Type 2 - NPS
                    // Type 3 - Admissional
                    // Type 4 - Demissional
                    type = 4,

                    // Itens de pequisa
                    list = listOf(
                        ItemPesquisa(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 4,

                            // Lista de perguntas
                            content = listOf(
                                Pergunta(
                                    // Type 0 - Múltipla escolha
                                    // Type 1 - Escala
                                    // Type 2 - Checklist
                                    type = 0,
                                    enunciated = "Enunciado 1 da pesquisa de NPS.",
                                    questionOptions = listOf(
                                        "Opção 1",
                                        "Opção 2",
                                        "Opção 3"
                                    )
                                )
                            ),

                            // Data
                            date = Date()
                        )
                    )
                )
            )
        )

    }

    private var aux: Boolean = true
    // 0 - NENHUMA
    // 1 - DIÁRIA
    // 2 - SEMANAL
    // 3 - NPS
    private var filterActive: Int = 0

    private fun filter(type: Int) {
        if (aux) {
            setFilter(type)
        } else {
            surveyAdapter.setListSurvey(
                // Lista de itens de pesquisa
                list = listOf(

                    // DIÁRIO
                    ListItem(
                        // Type 0 - Humor Diário
                        // Type 1 - Humor Semanal
                        // Type 2 - NPS
                        // Type 3 - Admissional
                        // Type 4 - Demissional
                        type = 0,

                        // Itens de pequisa
                        list = listOf(
                            ItemPesquisa(
                                // Type 0 - Humor Diário
                                // Type 1 - Humor Semanal
                                // Type 2 - NPS
                                // Type 3 - Admissional
                                // Type 4 - Demissional
                                type = 0,

                                // Lista de perguntas
                                content = null,

                                // Data
                                date = Date()
                            )
                        )
                    ),

                    // SEMANAL
                    ListItem(
                        // Type 0 - Humor Diário
                        // Type 1 - Humor Semanal
                        // Type 2 - NPS
                        // Type 3 - Admissional
                        // Type 4 - Demissional
                        type = 1,

                        // Itens de pequisa
                        list = listOf(
                            ItemPesquisa(
                                // Type 0 - Humor Diário
                                // Type 1 - Humor Semanal
                                // Type 2 - NPS
                                // Type 3 - Admissional
                                // Type 4 - Demissional
                                type = 1,

                                // Lista de perguntas
                                content = null,

                                // Data
                                date = Date()
                            )
                        )
                    ),

                    // NPS
                    ListItem(
                        // Type 0 - Humor Diário
                        // Type 1 - Humor Semanal
                        // Type 2 - NPS
                        // Type 3 - Admissional
                        // Type 4 - Demissional
                        type = 2,

                        // Itens de pequisa
                        list = listOf(
                            ItemPesquisa(
                                // Type 0 - Humor Diário
                                // Type 1 - Humor Semanal
                                // Type 2 - NPS
                                // Type 3 - Admissional
                                // Type 4 - Demissional
                                type = 2,

                                // Lista de perguntas
                                content = listOf(
                                    Pergunta(
                                        // Type 0 - Múltipla escolha
                                        // Type 1 - Escala
                                        // Type 2 - Checklist
                                        type = 0,
                                        enunciated = "Enunciado 1 da pesquisa de NPS.",
                                        questionOptions = listOf(
                                            "Opção 1",
                                            "Opção 2",
                                            "Opção 3"
                                        )
                                    )
                                ),

                                // Data
                                date = Date()
                            )
                        )
                    ),

                    // Admissional
                    ListItem(
                        // Type 0 - Humor Diário
                        // Type 1 - Humor Semanal
                        // Type 2 - NPS
                        // Type 3 - Admissional
                        // Type 4 - Demissional
                        type = 3,

                        // Itens de pequisa
                        list = listOf(
                            ItemPesquisa(
                                // Type 0 - Humor Diário
                                // Type 1 - Humor Semanal
                                // Type 2 - NPS
                                // Type 3 - Admissional
                                // Type 4 - Demissional
                                type = 3,

                                // Lista de perguntas
                                content = listOf(
                                    Pergunta(
                                        // Type 0 - Múltipla escolha
                                        // Type 1 - Escala
                                        // Type 2 - Checklist
                                        type = 0,
                                        enunciated = "Enunciado 1 da pesquisa de NPS.",
                                        questionOptions = listOf(
                                            "Opção 1",
                                            "Opção 2",
                                            "Opção 3"
                                        )
                                    )
                                ),

                                // Data
                                date = Date()
                            )
                        ),
                    ),

                    // DEMISSIONAL
                    ListItem(
                        // Type 0 - Humor Diário
                        // Type 1 - Humor Semanal
                        // Type 2 - NPS
                        // Type 3 - Admissional
                        // Type 4 - Demissional
                        type = 4,

                        // Itens de pequisa
                        list = listOf(
                            ItemPesquisa(
                                // Type 0 - Humor Diário
                                // Type 1 - Humor Semanal
                                // Type 2 - NPS
                                // Type 3 - Admissional
                                // Type 4 - Demissional
                                type = 4,

                                // Lista de perguntas
                                content = listOf(
                                    Pergunta(
                                        // Type 0 - Múltipla escolha
                                        // Type 1 - Escala
                                        // Type 2 - Checklist
                                        type = 0,
                                        enunciated = "Enunciado 1 da pesquisa de NPS.",
                                        questionOptions = listOf(
                                            "Opção 1",
                                            "Opção 2",
                                            "Opção 3"
                                        )
                                    )
                                ),

                                // Data
                                date = Date()
                            )
                        )
                    )
                )
            )
            aux = true
        }
    }

    private fun setFilter(type: Int) {
        when (type) {
            // DIÁRIO
            0 -> {
                surveyAdapter.setListSurvey(
                    // Lista de itens de pesquisa
                    list = listOf(
                        // DIÁRIO
                        ListItem(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 0,

                            // Itens de pequisa
                            list = listOf(
                                ItemPesquisa(
                                    // Type 0 - Humor Diário
                                    // Type 1 - Humor Semanal
                                    // Type 2 - NPS
                                    // Type 3 - Admissional
                                    // Type 4 - Demissional
                                    type = 0,

                                    // Lista de perguntas
                                    content = null,

                                    // Data
                                    date = Date()
                                )
                            )
                        )
                    )
                )
            }
            // SEMANAL
            1 -> {
                surveyAdapter.setListSurvey(
                    list = listOf(
                        ListItem(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 1,

                            // Itens de pequisa
                            list = listOf(
                                ItemPesquisa(
                                    // Type 0 - Humor Diário
                                    // Type 1 - Humor Semanal
                                    // Type 2 - NPS
                                    // Type 3 - Admissional
                                    // Type 4 - Demissional
                                    type = 1,

                                    // Lista de perguntas
                                    content = null,

                                    // Data
                                    date = Date()
                                )
                            )
                        )
                    )
                )
            }
            // NPS
            2 -> {
                surveyAdapter.setListSurvey(

                    // Lista de itens de pesquisa
                    list = listOf(
                        ListItem(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 2,

                            // Itens de pequisa
                            list = listOf(
                                ItemPesquisa(
                                    // Type 0 - Humor Diário
                                    // Type 1 - Humor Semanal
                                    // Type 2 - NPS
                                    // Type 3 - Admissional
                                    // Type 4 - Demissional
                                    type = 2,

                                    // Lista de perguntas
                                    content = listOf(
                                        Pergunta(
                                            // Type 0 - Múltipla escolha
                                            // Type 1 - Escala
                                            // Type 2 - Checklist
                                            type = 0,
                                            enunciated = "Enunciado 1 da pesquisa de NPS.",
                                            questionOptions = listOf(
                                                "Opção 1",
                                                "Opção 2",
                                                "Opção 3"
                                            )
                                        )
                                    ),

                                    // Data
                                    date = Date()
                                )
                            )
                        )
                    )
                )
            }
            // Admissional
            3 -> {
                surveyAdapter.setListSurvey(

                    // Lista de itens de pesquisa
                    list = listOf(
                        ListItem(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 3,

                            // Itens de pequisa
                            list = listOf(
                                ItemPesquisa(
                                    // Type 0 - Humor Diário
                                    // Type 1 - Humor Semanal
                                    // Type 2 - NPS
                                    // Type 3 - Admissional
                                    // Type 4 - Demissional
                                    type = 3,

                                    // Lista de perguntas
                                    content = listOf(
                                        Pergunta(
                                            // Type 0 - Múltipla escolha
                                            // Type 1 - Escala
                                            // Type 2 - Checklist
                                            type = 0,
                                            enunciated = "Enunciado 1 da pesquisa de NPS.",
                                            questionOptions = listOf(
                                                "Opção 1",
                                                "Opção 2",
                                                "Opção 3"
                                            )
                                        )
                                    ),

                                    // Data
                                    date = Date()
                                )
                            ),
                        )
                    )
                )
            }
            // DEMISSIONAL
            else -> {
                surveyAdapter.setListSurvey(

                    // Lista de itens de pesquisa
                    list = listOf(
                        ListItem(
                            // Type 0 - Humor Diário
                            // Type 1 - Humor Semanal
                            // Type 2 - NPS
                            // Type 3 - Admissional
                            // Type 4 - Demissional
                            type = 4,

                            // Itens de pequisa
                            list = listOf(
                                ItemPesquisa(
                                    // Type 0 - Humor Diário
                                    // Type 1 - Humor Semanal
                                    // Type 2 - NPS
                                    // Type 3 - Admissional
                                    // Type 4 - Demissional
                                    type = 4,

                                    // Lista de perguntas
                                    content = listOf(
                                        Pergunta(
                                            // Type 0 - Múltipla escolha
                                            // Type 1 - Escala
                                            // Type 2 - Checklist
                                            type = 0,
                                            enunciated = "Enunciado 1 da pesquisa de NPS.",
                                            questionOptions = listOf(
                                                "Opção 1",
                                                "Opção 2",
                                                "Opção 3"
                                            )
                                        )
                                    ),

                                    // Data
                                    date = Date()
                                )
                            )
                        )
                    )
                )
            }
        }
        aux = false
    }

    private fun setClick() {
        Log.i("TESTE", "toquei")
        findNavController().navigate(
            HomeFragmentDirections.actionHomeFragmentToSurveyFragment()
        )
    }
}